<%- include('../partials/header'); -%> <%- include('../partials/adminNav'); -%>
<%- include('../partials/flash', { messages: successMessages, type: 'success' }) %>
<%- include('../partials/flash', { messages: errorMessages, type: 'danger' }) %>

    <div class="container">
      <h1 class="mt-4 mb-4">Create Student</h1>
      <form action="/admin/student" method="POST">
        <div class="form-group">
          <label for="username">Username:</label>
          <input type="text" id="username" name="username" class="form-control" required />
        </div>
        <div class="form-group">
          <label for="password">Password:</label>
          <input type="password" id="password" name="password" class="form-control" required />
        </div>

        <div class="form-group">
          <label for="semester">Semester:</label>
          <select id="semester" name="sem" class="form-control" required>
            <option value="1">Semester 1</option>
            <option value="2">Semester 2</option>
            <option value="3">Semester 3</option>
            <option value="4">Semester 4</option>
            <option value="5">Semester 5</option>
            <option value="6">Semester 6</option>
            <option value="7">Semester 7</option>
            <option value="8">Semester 8</option>
          </select>
        </div>

        <div class="form-group">
          <label for="facultyAdvisor">Faculty Advisor:</label>
          <select id="facultyAdvisor" name="facultyAdvisor" class="form-control" required>
            <% facultyMembers.forEach(faculty=> { %>
              <option value="<%= faculty._id %>">
                <%= faculty.name %>
              </option>
              <% }) %>
          </select>
        </div>
        <button type="submit" class="btn btn-primary mt-3">Create Student</button>
      </form>
      <% if(students.length){ %>
        <h2 class="mt-4 mb-4">Student List</h2>
        <ul class="list-group">
          <% students.forEach(student=> { %>
            <li class="list-group-item d-flex justify-content-between align-items-center mb-1">
              <%= student.username %>
                <div class="btn-group" role="group">
                  <a href="/admin/student/<%= student._id %>/edit" class="btn btn-sm btn-info">Edit</a>
                  <form action="/admin/student/<%= student._id %>?_method=DELETE" method="POST">
                    <button type="submit" class="btn btn-sm btn-danger mx-3">Delete</button>
                  </form>
                </div>
            </li>
            <% }) %>
        </ul>
        <% } %>
    </div>
    <%- include('../partials/footer'); -%>