<%- include('../partials/header'); -%> <%- include('../partials/flash', { messages: successMessages, type: 'success' })
    %> <%- include('../partials/flash', { messages: errorMessages, type: 'danger' }) %>

      <div class="bg-dark text-light py-4">
        <div class="container">
          <div class="row justify-content-center align-items-center">
            <div class="col-md-6 text-center mb-3">
              <img src="/images/BEC logo_04.png" alt="College Logo" height="80" />
              <h2>Basaveshwar Engineering College, Bagalkote</h2>
            </div>
          </div>
        </div>
      </div>

      <div class="container mt-4">
        <div class="row justify-content-center">
          <div class="col-md-8">
            <div class="card bg-dark text-light col-md-6 mx-auto">
              
              <div class="card-header">
                <h1 class="card-title text-center">Student Registration</h1>
              </div>
              <div class="card-body">
                <form action="/student/register" method="POST" class="needs-validation" novalidate>
                  <div class="form-group">
                    <label for="username">USN:</label>
                    <input type="text" id="username" name="username" class="form-control form-control-sm" minlength="10"
                      maxlength="10" required />
                    <div class="invalid-feedback">Please enter a valid USN.</div>
                  </div>
                  <div class="form-group">
                    <label for="password">Password:</label>
                    <input type="password" id="password" name="password" minlength="8"
                      class="form-control form-control-sm" required />
                    <div class="invalid-feedback">
                      Password must be at least 8 characters.
                    </div>
                  </div>
                  <div class="form-group">
                    <label for="department">Department:</label>
                    <select id="department" name="department" class="form-control form-control-sm" required>
                      <option value="">Select Department</option>
                      <option value="AI">Artificial Intelligence</option>
                      <option value="AU">Automobile</option>
                      <option value="BT">Bio-Technology</option>
                      <option value="CS">Computer Science</option>
                      <option value="CV">Civil</option>
                      <option value="EC">Electronics and Communication</option>
                      <option value="EE">Electrical and Electronics</option>
                      <option value="EI">Electronics and Instrumentation</option>
                      <option value="IP">Industrial Production</option>
                      <option value="IS">Information Science</option>
                      <option value="ME">Mechanical</option>
                    </select>
                    <div class="invalid-feedback">Please select a department.</div>
                  </div>
                  <div class="form-group">
                    <label for="semester">Semester:</label>
                    <select id="semester" name="sem" class="form-control form-control-sm" required>
                      <option value="1">Semester 1</option>
                      <option value="2">Semester 2</option>
                      <option value="3">Semester 3</option>
                      <option value="4">Semester 4</option>
                      <option value="5">Semester 5</option>
                      <option value="6">Semester 6</option>
                      <option value="7">Semester 7</option>
                      <option value="8">Semester 8</option>
                    </select>
                    <div class="invalid-feedback">Please select a semester.</div>
                  </div>
                  <div class="form-group">
                    <label for="facultyAdvisor">Faculty Advisor:</label>
                    <select id="facultyAdvisor" name="facultyAdvisor" class="form-control form-control-sm" required>
                      
                    </select>
                    <div class="invalid-feedback">
                      Please select a faculty advisor.
                    </div>
                  </div>
                  <div class="text-center">
                    <button type="submit" class="btn btn-primary mt-3">
                      Register
                    </button>
                  </div>
                </form>
              </div>
            </div>
          </div>
        </div>
      </div>
      <script>
        document.addEventListener('DOMContentLoaded', () => {
          const select = document.getElementById('facultyAdvisor');
          const dept = document.getElementById('department');
      
          dept.addEventListener('change', () => {
            const departmentValue = dept.value;
      
            // Clear previous options
            select.innerHTML = '';
      
            // Dynamically populate options based on the selected department
            <% facultyMembers.forEach(faculty => { %>
              if ('<%= faculty.department %>' === departmentValue) {
                const option = document.createElement('option');
                option.value = '<%= faculty._id %>';
                option.textContent = '<%= faculty.name %>';
                select.appendChild(option);
              }
            <% }); %>
          });
        });
      </script>
      <script src="/Javascript/editFormVal.js"></script>
      <%- include('../partials/footer'); -%>